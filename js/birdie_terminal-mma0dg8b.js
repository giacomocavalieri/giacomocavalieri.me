class z{withFields(Z){let Q=Object.keys(this).map((W)=>(W in Z)?Z[W]:this[W]);return new this.constructor(...Q)}}class zZ{static fromArray(Z,Q){let W=Q||new R;for(let J=Z.length-1;J>=0;--J)W=new IZ(Z[J],W);return W}[Symbol.iterator](){return new l6(this)}toArray(){return[...this]}atLeastLength(Z){let Q=this;while(Z-- >0&&Q)Q=Q.tail;return Q!==void 0}hasLength(Z){let Q=this;while(Z-- >0&&Q)Q=Q.tail;return Z===-1&&Q instanceof R}countLength(){let Z=this,Q=0;while(Z)Z=Z.tail,Q++;return Q-1}}function U(Z,Q){return new IZ(Z,Q)}function B(Z,Q){return zZ.fromArray(Z,Q)}class l6{#Z;constructor(Z){this.#Z=Z}next(){if(this.#Z instanceof R)return{done:!0};else{let{head:Z,tail:Q}=this.#Z;return this.#Z=Q,{value:Z,done:!1}}}}class R extends zZ{}class IZ extends zZ{constructor(Z,Q){super();this.head=Z,this.tail=Q}}class CQ{bitSize;byteSize;bitOffset;rawBuffer;constructor(Z,Q,W){if(!(Z instanceof Uint8Array))throw globalThis.Error("BitArray can only be constructed from a Uint8Array");if(this.bitSize=Q??Z.length*8,this.byteSize=Math.trunc((this.bitSize+7)/8),this.bitOffset=W??0,this.bitSize<0)throw globalThis.Error(`BitArray bit size is invalid: ${this.bitSize}`);if(this.bitOffset<0||this.bitOffset>7)throw globalThis.Error(`BitArray bit offset is invalid: ${this.bitOffset}`);if(Z.length!==Math.trunc((this.bitOffset+this.bitSize+7)/8))throw globalThis.Error("BitArray buffer length is invalid");this.rawBuffer=Z}byteAt(Z){if(Z<0||Z>=this.byteSize)return;return LQ(this.rawBuffer,this.bitOffset,Z)}equals(Z){if(this.bitSize!==Z.bitSize)return!1;let Q=Math.trunc(this.bitSize/8);if(this.bitOffset===0&&Z.bitOffset===0){for(let J=0;J<Q;J++)if(this.rawBuffer[J]!==Z.rawBuffer[J])return!1;let W=this.bitSize%8;if(W){let J=8-W;if(this.rawBuffer[Q]>>J!==Z.rawBuffer[Q]>>J)return!1}}else{for(let J=0;J<Q;J++){let X=LQ(this.rawBuffer,this.bitOffset,J),K=LQ(Z.rawBuffer,Z.bitOffset,J);if(X!==K)return!1}let W=this.bitSize%8;if(W){let J=LQ(this.rawBuffer,this.bitOffset,Q),X=LQ(Z.rawBuffer,Z.bitOffset,Q),K=8-W;if(J>>K!==X>>K)return!1}}return!0}get buffer(){if(i6("buffer","Use BitArray.byteAt() or BitArray.rawBuffer instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.buffer does not support unaligned bit arrays");return this.rawBuffer}get length(){if(i6("length","Use BitArray.bitSize or BitArray.byteSize instead"),this.bitOffset!==0||this.bitSize%8!==0)throw new globalThis.Error("BitArray.length does not support unaligned bit arrays");return this.rawBuffer.length}}function LQ(Z,Q,W){if(Q===0)return Z[W]??0;else{let J=Z[W]<<Q&255,X=Z[W+1]>>8-Q;return J|X}}class TW{constructor(Z){this.value=Z}}var r6={};function i6(Z,Q){if(r6[Z])return;console.warn(`Deprecated BitArray.${Z} property used in JavaScript FFI code. ${Q}.`),r6[Z]=!0}class YQ extends z{static isResult(Z){return Z instanceof YQ}}class C extends YQ{constructor(Z){super();this[0]=Z}isOk(){return!0}}class x extends YQ{constructor(Z){super();this[0]=Z}isOk(){return!1}}function ZZ(Z,Q){let W=[Z,Q];while(W.length){let J=W.pop(),X=W.pop();if(J===X)continue;if(!n6(J)||!n6(X))return!1;if(!X9(J,X)||t8(J,X)||e8(J,X)||Z9(J,X)||Q9(J,X)||W9(J,X)||J9(J,X))return!1;let G=Object.getPrototypeOf(J);if(G!==null&&typeof G.equals==="function")try{if(J.equals(X))continue;else return!1}catch{}let[V,Y]=o8(J),H=V(J),M=V(X);if(H.length!==M.length)return!1;for(let F of H)W.push(Y(J,F),Y(X,F))}return!0}function o8(Z){if(Z instanceof Map)return[(Q)=>Q.keys(),(Q,W)=>Q.get(W)];else{let Q=Z instanceof globalThis.Error?["message"]:[];return[(W)=>[...Q,...Object.keys(W)],(W,J)=>W[J]]}}function t8(Z,Q){return Z instanceof Date&&(Z>Q||Z<Q)}function e8(Z,Q){return!(Z instanceof CQ)&&Z.buffer instanceof ArrayBuffer&&Z.BYTES_PER_ELEMENT&&!(Z.byteLength===Q.byteLength&&Z.every((W,J)=>W===Q[J]))}function Z9(Z,Q){return Array.isArray(Z)&&Z.length!==Q.length}function Q9(Z,Q){return Z instanceof Map&&Z.size!==Q.size}function W9(Z,Q){return Z instanceof Set&&(Z.size!=Q.size||[...Z].some((W)=>!Q.has(W)))}function J9(Z,Q){return Z instanceof RegExp&&(Z.source!==Q.source||Z.flags!==Q.flags)}function n6(Z){return typeof Z==="object"&&Z!==null}function X9(Z,Q){if(typeof Z!=="object"&&typeof Q!=="object"&&(!Z||!Q))return!1;if([Promise,WeakSet,WeakMap,Function].some((J)=>Z instanceof J))return!1;return Z.constructor===Q.constructor}function PW(Z,Q){if(Q===0)return 0;else return Z%Q}function SW(Z,Q){return Math.trunc(wQ(Z,Q))}function wQ(Z,Q){if(Q===0)return 0;else return Z/Q}function K9(Z,Q,W,J,X,K,G){let V=new globalThis.Error(K);V.gleam_error=Z,V.file=Q,V.module=W,V.line=J,V.function=X,V.fn=X;for(let Y in G)V[Y]=G[Y];return V}class QZ extends z{constructor(Z){super();this[0]=Z}}class VZ extends z{}var a6=new WeakMap,LW=new DataView(new ArrayBuffer(8)),CW=0;function wW(Z){let Q=a6.get(Z);if(Q!==void 0)return Q;let W=CW++;if(CW===2147483647)CW=0;return a6.set(Z,W),W}function EW(Z,Q){return Z^Q+2654435769+(Z<<6)+(Z>>2)|0}function kW(Z){let Q=0,W=Z.length;for(let J=0;J<W;J++)Q=Math.imul(31,Q)+Z.charCodeAt(J)|0;return Q}function t6(Z){LW.setFloat64(0,Z);let Q=LW.getInt32(0),W=LW.getInt32(4);return Math.imul(73244475,Q>>16^Q)^W}function G9(Z){return kW(Z.toString())}function V9(Z){let Q=Object.getPrototypeOf(Z);if(Q!==null&&typeof Q.hashCode==="function")try{let J=Z.hashCode(Z);if(typeof J==="number")return J}catch{}if(Z instanceof Promise||Z instanceof WeakSet||Z instanceof WeakMap)return wW(Z);if(Z instanceof Date)return t6(Z.getTime());let W=0;if(Z instanceof ArrayBuffer)Z=new Uint8Array(Z);if(Array.isArray(Z)||Z instanceof Uint8Array)for(let J=0;J<Z.length;J++)W=Math.imul(31,W)+MZ(Z[J])|0;else if(Z instanceof Set)Z.forEach((J)=>{W=W+MZ(J)|0});else if(Z instanceof Map)Z.forEach((J,X)=>{W=W+EW(MZ(J),MZ(X))|0});else{let J=Object.keys(Z);for(let X=0;X<J.length;X++){let K=J[X],G=Z[K];W=W+EW(MZ(G),kW(K))|0}}return W}function MZ(Z){if(Z===null)return 1108378658;if(Z===void 0)return 1108378659;if(Z===!0)return 1108378657;if(Z===!1)return 1108378656;switch(typeof Z){case"number":return t6(Z);case"string":return kW(Z);case"bigint":return G9(Z);case"object":return V9(Z);case"symbol":return wW(Z);case"function":return wW(Z);default:return 0}}var LZ=5,yW=Math.pow(2,LZ),Y9=yW-1,H9=yW/2,M9=yW/4,JZ=0,SZ=1,YZ=2,iZ=3,bW={type:YZ,bitmap:0,array:[]};function EQ(Z,Q){return Z>>>Q&Y9}function QW(Z,Q){return 1<<EQ(Z,Q)}function U9(Z){return Z-=Z>>1&1431655765,Z=(Z&858993459)+(Z>>2&858993459),Z=Z+(Z>>4)&252645135,Z+=Z>>8,Z+=Z>>16,Z&127}function gW(Z,Q){return U9(Z&Q-1)}function UZ(Z,Q,W){let J=Z.length,X=Array(J);for(let K=0;K<J;++K)X[K]=Z[K];return X[Q]=W,X}function F9(Z,Q,W){let J=Z.length,X=Array(J+1),K=0,G=0;while(K<Q)X[G++]=Z[K++];X[G++]=W;while(K<J)X[G++]=Z[K++];return X}function xW(Z,Q){let W=Z.length,J=Array(W-1),X=0,K=0;while(X<Q)J[K++]=Z[X++];++X;while(X<W)J[K++]=Z[X++];return J}function e6(Z,Q,W,J,X,K){let G=MZ(Q);if(G===J)return{type:iZ,hash:G,array:[{type:JZ,k:Q,v:W},{type:JZ,k:X,v:K}]};let V={val:!1};return xQ(fW(bW,Z,G,Q,W,V),Z,J,X,K,V)}function xQ(Z,Q,W,J,X,K){switch(Z.type){case SZ:return q9(Z,Q,W,J,X,K);case YZ:return fW(Z,Q,W,J,X,K);case iZ:return R9(Z,Q,W,J,X,K)}}function q9(Z,Q,W,J,X,K){let G=EQ(W,Q),V=Z.array[G];if(V===void 0)return K.val=!0,{type:SZ,size:Z.size+1,array:UZ(Z.array,G,{type:JZ,k:J,v:X})};if(V.type===JZ){if(ZZ(J,V.k)){if(X===V.v)return Z;return{type:SZ,size:Z.size,array:UZ(Z.array,G,{type:JZ,k:J,v:X})}}return K.val=!0,{type:SZ,size:Z.size,array:UZ(Z.array,G,e6(Q+LZ,V.k,V.v,W,J,X))}}let Y=xQ(V,Q+LZ,W,J,X,K);if(Y===V)return Z;return{type:SZ,size:Z.size,array:UZ(Z.array,G,Y)}}function fW(Z,Q,W,J,X,K){let G=QW(W,Q),V=gW(Z.bitmap,G);if((Z.bitmap&G)!==0){let Y=Z.array[V];if(Y.type!==JZ){let M=xQ(Y,Q+LZ,W,J,X,K);if(M===Y)return Z;return{type:YZ,bitmap:Z.bitmap,array:UZ(Z.array,V,M)}}let H=Y.k;if(ZZ(J,H)){if(X===Y.v)return Z;return{type:YZ,bitmap:Z.bitmap,array:UZ(Z.array,V,{type:JZ,k:J,v:X})}}return K.val=!0,{type:YZ,bitmap:Z.bitmap,array:UZ(Z.array,V,e6(Q+LZ,H,Y.v,W,J,X))}}else{let Y=Z.array.length;if(Y>=H9){let H=Array(32),M=EQ(W,Q);H[M]=fW(bW,Q+LZ,W,J,X,K);let F=0,I=Z.bitmap;for(let D=0;D<32;D++){if((I&1)!==0){let j=Z.array[F++];H[D]=j}I=I>>>1}return{type:SZ,size:Y+1,array:H}}else{let H=F9(Z.array,V,{type:JZ,k:J,v:X});return K.val=!0,{type:YZ,bitmap:Z.bitmap|G,array:H}}}}function R9(Z,Q,W,J,X,K){if(W===Z.hash){let G=_W(Z,J);if(G!==-1){if(Z.array[G].v===X)return Z;return{type:iZ,hash:W,array:UZ(Z.array,G,{type:JZ,k:J,v:X})}}let V=Z.array.length;return K.val=!0,{type:iZ,hash:W,array:UZ(Z.array,V,{type:JZ,k:J,v:X})}}return xQ({type:YZ,bitmap:QW(Z.hash,Q),array:[Z]},Q,W,J,X,K)}function _W(Z,Q){let W=Z.array.length;for(let J=0;J<W;J++)if(ZZ(Q,Z.array[J].k))return J;return-1}function ZW(Z,Q,W,J){switch(Z.type){case SZ:return z9(Z,Q,W,J);case YZ:return I9(Z,Q,W,J);case iZ:return N9(Z,J)}}function z9(Z,Q,W,J){let X=EQ(W,Q),K=Z.array[X];if(K===void 0)return;if(K.type!==JZ)return ZW(K,Q+LZ,W,J);if(ZZ(J,K.k))return K;return}function I9(Z,Q,W,J){let X=QW(W,Q);if((Z.bitmap&X)===0)return;let K=gW(Z.bitmap,X),G=Z.array[K];if(G.type!==JZ)return ZW(G,Q+LZ,W,J);if(ZZ(J,G.k))return G;return}function N9(Z,Q){let W=_W(Z,Q);if(W<0)return;return Z.array[W]}function hW(Z,Q,W,J){switch(Z.type){case SZ:return O9(Z,Q,W,J);case YZ:return j9(Z,Q,W,J);case iZ:return D9(Z,J)}}function O9(Z,Q,W,J){let X=EQ(W,Q),K=Z.array[X];if(K===void 0)return Z;let G=void 0;if(K.type===JZ){if(!ZZ(K.k,J))return Z}else if(G=hW(K,Q+LZ,W,J),G===K)return Z;if(G===void 0){if(Z.size<=M9){let V=Z.array,Y=Array(Z.size-1),H=0,M=0,F=0;while(H<X){let I=V[H];if(I!==void 0)Y[M]=I,F|=1<<H,++M;++H}++H;while(H<V.length){let I=V[H];if(I!==void 0)Y[M]=I,F|=1<<H,++M;++H}return{type:YZ,bitmap:F,array:Y}}return{type:SZ,size:Z.size-1,array:UZ(Z.array,X,G)}}return{type:SZ,size:Z.size,array:UZ(Z.array,X,G)}}function j9(Z,Q,W,J){let X=QW(W,Q);if((Z.bitmap&X)===0)return Z;let K=gW(Z.bitmap,X),G=Z.array[K];if(G.type!==JZ){let V=hW(G,Q+LZ,W,J);if(V===G)return Z;if(V!==void 0)return{type:YZ,bitmap:Z.bitmap,array:UZ(Z.array,K,V)};if(Z.bitmap===X)return;return{type:YZ,bitmap:Z.bitmap^X,array:xW(Z.array,K)}}if(ZZ(J,G.k)){if(Z.bitmap===X)return;return{type:YZ,bitmap:Z.bitmap^X,array:xW(Z.array,K)}}return Z}function D9(Z,Q){let W=_W(Z,Q);if(W<0)return Z;if(Z.array.length===1)return;return{type:iZ,hash:Z.hash,array:xW(Z.array,W)}}function ZJ(Z,Q){if(Z===void 0)return;let W=Z.array,J=W.length;for(let X=0;X<J;X++){let K=W[X];if(K===void 0)continue;if(K.type===JZ){Q(K.v,K.k);continue}ZJ(K,Q)}}class WZ{static fromObject(Z){let Q=Object.keys(Z),W=WZ.new();for(let J=0;J<Q.length;J++){let X=Q[J];W=W.set(X,Z[X])}return W}static fromMap(Z){let Q=WZ.new();return Z.forEach((W,J)=>{Q=Q.set(J,W)}),Q}static new(){return new WZ(void 0,0)}constructor(Z,Q){this.root=Z,this.size=Q}get(Z,Q){if(this.root===void 0)return Q;let W=ZW(this.root,0,MZ(Z),Z);if(W===void 0)return Q;return W.v}set(Z,Q){let W={val:!1},J=this.root===void 0?bW:this.root,X=xQ(J,0,MZ(Z),Z,Q,W);if(X===this.root)return this;return new WZ(X,W.val?this.size+1:this.size)}delete(Z){if(this.root===void 0)return this;let Q=hW(this.root,0,MZ(Z),Z);if(Q===this.root)return this;if(Q===void 0)return WZ.new();return new WZ(Q,this.size-1)}has(Z){if(this.root===void 0)return!1;return ZW(this.root,0,MZ(Z),Z)!==void 0}entries(){if(this.root===void 0)return[];let Z=[];return this.forEach((Q,W)=>Z.push([W,Q])),Z}forEach(Z){ZJ(this.root,Z)}hashCode(){let Z=0;return this.forEach((Q,W)=>{Z=Z+EW(MZ(Q),MZ(W))|0}),Z}equals(Z){if(!(Z instanceof WZ)||this.size!==Z.size)return!1;try{return this.forEach((Q,W)=>{if(!ZZ(Z.get(W,!Q),Q))throw o6}),!0}catch(Q){if(Q===o6)return!1;throw Q}}}var o6=Symbol();class l extends z{}class a extends z{}class $Z extends z{}function P9(Z,Q){if(Z<Q)return Z;else return Q}function S9(Z,Q){if(Z>Q)return Z;else return Q}function BX(Z,Q,W){let X=P9(Z,W);return S9(X,Q)}function L9(Z){return-1*Z}function kQ(Z){if(Z>=0)return vW(Z);else return 0-vW(L9(Z))}function AX(Z,Q){if(Q<=0){let J=mW(10,u(-Q));return u(kQ(wQ(Z,J)))*J}else{let J=mW(10,u(Q));return wQ(u(kQ(Z*J)),J)}}function $W(Z,Q){if(Z>Q)return Z;else return Q}function C9(Z){let Q=yQ()*u(Z),W=WW(Q);return kQ(W)}function g9(Z,Q,W){if(W<=0)return"";else if(Q<0){let K=JW(Z)+Q;if(K<0)return"";else return uW(Z,K,W)}else return uW(Z,Q,W)}function f9(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof R)return J;else{let X=W.head;Z=W.tail,Q=J+X}}}function XJ(Z){return f9(Z,"")}function _9(Z,Q,W){while(!0){let J=Z,X=Q,K=W,G;if(J%2===0)G=K;else G=K+X;let Y=G,H=globalThis.Math.trunc(J/2);if(H<=0)return Y;else Z=H,Q=X+X,W=Y}}function cW(Z,Q){if(Q<=0)return"";else return _9(Q,Z,"")}function h9(Z,Q){let W=JW(Q),J=SW(Z,W),X=PW(Z,W);return cW(Q,J)+g9(Q,0,X)}function dX(Z,Q,W){let J=JW(Z),X=Q-J;if(X<=0)return Z;else return Z+h9(X,W)}function sX(Z){let W=KJ(Z);return GJ(W)}class FQ extends z{constructor(Z,Q,W){super();this.expected=Z,this.found=Q,this.path=W}}class aZ extends z{constructor(Z){super();this.function=Z}}var HJ=new aZ(c9);var _Q=new aZ(p9);function uZ(Z,Q){let W=Q.function(Z),J,X;if(J=W[0],X=W[1],X instanceof R)return new C(J);else return new x(X)}function hQ(Z){return new aZ((Q)=>{return[Z,B([])]})}function vQ(Z,Q){return new aZ((W)=>{let J=Z.function(W),X,K;return X=J[0],K=J[1],[Q(X),K]})}function u9(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(K instanceof R)return X;else{let{head:G,tail:V}=K,Y=G.function(J),H,M;if(H=Y,M=Y[1],M instanceof R)return H;else Z=J,Q=X,W=V}}}function MJ(Z,Q){return new aZ((W)=>{let J=Z.function(W),X,K;if(X=J,K=J[1],K instanceof R)return X;else return u9(W,X,Q)})}function UJ(Z,Q,W){let J=W(Z);if(J instanceof C)return[J[0],B([])];else return[J[0],B([new FQ(Q,HQ(Z),B([]))])]}function c9(Z){return UJ(Z,"Int",qJ)}function p9(Z){return UJ(Z,"String",RJ)}function dW(Z,Q){let W=MJ(_Q,B([(()=>{return vQ(HJ,lZ)})()])),J=UQ(Q,(K)=>{let G=u(K),V=uZ(G,W);if(V instanceof C)return V[0];else return"<"+HQ(G)+">"}),X=UQ(Z[1],(K)=>{return new FQ(K.expected,K.found,fQ(J,K.path))});return[Z[0],X]}function d9(Z,Q,W,J,X){while(!0){let K=Z,G=Q,V=W,Y=J,H=X;if(K instanceof R){let F=V(Y);return dW(F,d(G))}else{let{head:M,tail:F}=K,I=FJ(Y,M);if(I instanceof C){let D=I[0];if(D instanceof QZ){let j=D[0];Z=F,Q=U(M,G),W=V,J=j,X=H}else return H(Y,U(M,G))}else{let D=I[0],j=V(Y),S;S=j[0];let N=[S,B([new FQ(D,HQ(Y),B([]))])];return dW(N,d(G))}}}}function sW(Z,Q,W){return new aZ((J)=>{let X=d9(Z,B([]),Q.function,J,(M,F)=>{let I=Q.function(M),D;D=I[0];let j=[D,B([new FQ("Field","Nothing",B([]))])];return dW(j,d(F))}),K,G;K=X[0],G=X[1];let V=W(K).function(J),Y,H;return Y=V[0],H=V[1],[Y,fQ(G,H)]})}function rW(Z,Q,W){return sW(B([Z]),Q,W)}var NJ=void 0,zJ={};function u(Z){return Z}function A9(Z){if(/^[-+]?(\d+)\.(\d+)([eE][-+]?\d+)?$/.test(Z))return new C(parseFloat(Z));else return new x(NJ)}function lZ(Z){return Z.toString()}function JW(Z){if(Z==="")return 0;let Q=OJ(Z);if(Q){let W=0;for(let J of Q)W++;return W}else return Z.match(/./gsu).length}var IJ=void 0;function OJ(Z){if(globalThis.Intl&&Intl.Segmenter)return IJ||=new Intl.Segmenter,IJ.segment(Z)[Symbol.iterator]()}function uW(Z,Q,W){if(W<=0||Q>=Z.length)return"";let J=OJ(Z);if(J){while(Q-- >0)J.next();let X="";while(W-- >0){let K=J.next().value;if(K===void 0)break;X+=K.segment}return X}else return Z.match(/./gsu).slice(Q,Q+W).join("")}function pW(Z,Q){return Z.startsWith(Q)}var jJ=[" ","\t",`
`,"\v","\f","\r","","\u2028","\u2029"].join(""),s9=new RegExp(`^[${jJ}]*`),r9=new RegExp(`[${jJ}]*$`);function KJ(Z){return Z.replace(s9,"")}function GJ(Z){return Z.replace(r9,"")}function WW(Z){return Math.floor(Z)}function vW(Z){return Math.round(Z)}function mW(Z,Q){return Math.pow(Z,Q)}function yQ(){let Z=Math.random();if(Z===1)return yQ();return Z}function qQ(){return WZ.new()}function DJ(Z){return zZ.fromArray(Z.entries())}function yZ(Z,Q){let W=Z.get(Q,zJ);if(W===zJ)return new x(NJ);return new C(W)}function BJ(Z,Q,W){return W.set(Z,Q)}function HQ(Z){if(typeof Z==="string")return"String";else if(typeof Z==="boolean")return"Bool";else if(Z instanceof YQ)return"Result";else if(Z instanceof zZ)return"List";else if(Z instanceof CQ)return"BitArray";else if(Z instanceof WZ)return"Dict";else if(Number.isInteger(Z))return"Int";else if(Array.isArray(Z))return"Array";else if(typeof Z==="number")return"Float";else if(Z===null)return"Nil";else if(Z===void 0)return"Nil";else{let Q=typeof Z;return Q.charAt(0).toUpperCase()+Q.slice(1)}}function QJ(Z){let Q=Z.toString().replace("+","");if(Q.indexOf(".")>=0)return Q;else{let W=Q.indexOf("e");if(W>=0)return Q.slice(0,W)+".0"+Q.slice(W);else return Q+".0"}}class i9{#Z=new Set;inspect(Z){let Q=typeof Z;if(Z===!0)return"True";if(Z===!1)return"False";if(Z===null)return"//js(null)";if(Z===void 0)return"Nil";if(Q==="string")return this.#K(Z);if(Q==="bigint"||Number.isInteger(Z))return Z.toString();if(Q==="number")return QJ(Z);if(Z instanceof TW)return this.#G(Z);if(Z instanceof CQ)return this.#Y(Z);if(Z instanceof RegExp)return`//js(${Z})`;if(Z instanceof Date)return`//js(Date("${Z.toISOString()}"))`;if(Z instanceof globalThis.Error)return`//js(${Z.toString()})`;if(Z instanceof Function){let J=[];for(let X of Array(Z.length).keys())J.push(String.fromCharCode(X+97));return`//fn(${J.join(", ")}) { ... }`}if(this.#Z.size===this.#Z.add(Z).size)return"//js(circular reference)";let W;if(Array.isArray(Z))W=`#(${Z.map((J)=>this.inspect(J)).join(", ")})`;else if(Z instanceof zZ)W=this.#Q(Z);else if(Z instanceof z)W=this.#J(Z);else if(Z instanceof WZ)W=this.#W(Z);else if(Z instanceof Set)return`//js(Set(${[...Z].map((J)=>this.inspect(J)).join(", ")}))`;else W=this.#X(Z);return this.#Z.delete(Z),W}#X(Z){let Q=Object.getPrototypeOf(Z)?.constructor?.name||"Object",W=[];for(let K of Object.keys(Z))W.push(`${this.inspect(K)}: ${this.inspect(Z[K])}`);let J=W.length?" "+W.join(", ")+" ":"";return`//js(${Q==="Object"?"":Q+" "}{${J}})`}#W(Z){let Q="dict.from_list([",W=!0;return Z.forEach((J,X)=>{if(!W)Q=Q+", ";Q=Q+"#("+this.inspect(X)+", "+this.inspect(J)+")",W=!1}),Q+"])"}#J(Z){let Q=Object.keys(Z).map((W)=>{let J=this.inspect(Z[W]);return isNaN(parseInt(W))?`${W}: ${J}`:J}).join(", ");return Q?`${Z.constructor.name}(${Q})`:Z.constructor.name}#Q(Z){if(Z instanceof R)return"[]";let Q='charlist.from_string("',W="[",J=Z;while(J instanceof IZ){let X=J.head;if(J=J.tail,W!=="[")W+=", ";if(W+=this.inspect(X),Q)if(Number.isInteger(X)&&X>=32&&X<=126)Q+=String.fromCharCode(X);else Q=null}if(Q)return Q+'")';else return W+"]"}#K(Z){let Q='"';for(let W=0;W<Z.length;W++){let J=Z[W];switch(J){case`
`:Q+="\\n";break;case"\r":Q+="\\r";break;case"\t":Q+="\\t";break;case"\f":Q+="\\f";break;case"\\":Q+="\\\\";break;case'"':Q+="\\\"";break;default:if(J<" "||J>"~"&&J<" ")Q+="\\u{"+J.charCodeAt(0).toString(16).toUpperCase().padStart(4,"0")+"}";else Q+=J}}return Q+='"',Q}#G(Z){return`//utfcodepoint(${String.fromCodePoint(Z.value)})`}#Y(Z){if(Z.bitSize===0)return"<<>>";let Q="<<";for(let W=0;W<Z.byteSize-1;W++)Q+=Z.byteAt(W).toString(),Q+=", ";if(Z.byteSize*8===Z.bitSize)Q+=Z.byteAt(Z.byteSize-1).toString();else{let W=Z.bitSize%8;Q+=Z.byteAt(Z.byteSize-1)>>8-W,Q+=`:size(${W})`}return Q+=">>",Q}}function FJ(Z,Q){if(Z instanceof WZ||Z instanceof WeakMap||Z instanceof Map){let J={},X=Z.get(Q,J);if(X===J)return new C(new VZ);return new C(new QZ(X))}let W=Number.isInteger(Q);if(W&&Q>=0&&Q<8&&Z instanceof zZ){let J=0;for(let X of Z){if(J===Q)return new C(new QZ(X));J++}return new x("Indexable")}if(W&&Array.isArray(Z)||Z&&typeof Z==="object"||Z&&Object.getPrototypeOf(Z)===Object.prototype){if(Q in Z)return new C(new QZ(Z[Q]));return new C(new VZ)}return new x(W?"Indexable":"Dict")}function qJ(Z){if(Number.isInteger(Z))return new C(Z);return new x(0)}function RJ(Z){if(typeof Z==="string")return new C(Z);return new x("")}function gQ(Z,Q,W){return BJ(Q,W,Z)}function n9(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof R)return J;else{let X=W.head;Z=W.tail,Q=U(X,J)}}}function l9(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof R)return n9(J,B([]));else{let X=W.tail,K=W.head[0];Z=X,Q=U(K,J)}}}function mQ(Z){return l9(DJ(Z),B([]))}class o extends z{}class RQ extends z{}function $Q(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof R)return J;else{let X=W.head;Z=W.tail,Q=U(X,J)}}}function d(Z){return $Q(Z,B([]))}function a9(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof R)return d(K);else{let G=J.head;Z=J.tail,Q=X,W=U(X(G),K)}}}function UQ(Z,Q){return a9(Z,Q,B([]))}function o9(Z,Q,W,J){while(!0){let X=Z,K=Q,G=W,V=J;if(X instanceof R)return d(V);else{let{head:Y,tail:H}=X,M=U(K(Y,G),V);Z=H,Q=K,W=G+1,J=M}}}function d7(Z,Q){return o9(Z,Q,0,B([]))}function t9(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof R)return J;else{let X=W.head;Z=W.tail,Q=U(X,J)}}}function fQ(Z,Q){return t9(d(Z),Q)}function XW(Z,Q){return U(Q,Z)}function GZ(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof R)return X;else{let G=J.head;Z=J.tail,Q=K(X,G),W=K}}}function e9(Z,Q,W,J,X,K){while(!0){let G=Z,V=Q,Y=W,H=J,M=X,F=K,I=U(M,Y);if(G instanceof R)if(H instanceof o)return U(d(I),F);else return U(I,F);else{let{head:D,tail:j}=G,S=V(M,D);if(H instanceof o)if(S instanceof l)Z=j,Q=V,W=I,J=H,X=D,K=F;else if(S instanceof a)Z=j,Q=V,W=I,J=H,X=D,K=F;else{let N;if(H instanceof o)N=U(d(I),F);else N=U(I,F);let L=N;if(j instanceof R)return U(B([D]),L);else{let{head:O,tail:T}=j,E,q=V(D,O);if(q instanceof l)E=new o;else if(q instanceof a)E=new o;else E=new RQ;let A=E;Z=T,Q=V,W=B([D]),J=A,X=O,K=L}}else if(S instanceof l){let N;if(H instanceof o)N=U(d(I),F);else N=U(I,F);let L=N;if(j instanceof R)return U(B([D]),L);else{let{head:O,tail:T}=j,E,q=V(D,O);if(q instanceof l)E=new o;else if(q instanceof a)E=new o;else E=new RQ;let A=E;Z=T,Q=V,W=B([D]),J=A,X=O,K=L}}else if(S instanceof a){let N;if(H instanceof o)N=U(d(I),F);else N=U(I,F);let L=N;if(j instanceof R)return U(B([D]),L);else{let{head:O,tail:T}=j,E,q=V(D,O);if(q instanceof l)E=new o;else if(q instanceof a)E=new o;else E=new RQ;let A=E;Z=T,Q=V,W=B([D]),J=A,X=O,K=L}}else Z=j,Q=V,W=I,J=H,X=D,K=F}}}function Z0(Z,Q,W,J){while(!0){let X=Z,K=Q,G=W,V=J;if(X instanceof R)return $Q(K,V);else if(K instanceof R)return $Q(X,V);else{let{head:Y,tail:H}=X,M=K.head,F=K.tail,I=G(Y,M);if(I instanceof l)Z=H,Q=K,W=G,J=U(Y,V);else if(I instanceof a)Z=X,Q=F,W=G,J=U(M,V);else Z=X,Q=F,W=G,J=U(M,V)}}}function Q0(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof R)return d(K);else{let G=J.tail;if(G instanceof R){let V=J.head;return d(U(d(V),K))}else{let V=J.head,Y=G.head,H=G.tail,M=Z0(V,Y,X,B([]));Z=H,Q=X,W=U(M,K)}}}}function W0(Z,Q,W,J){while(!0){let X=Z,K=Q,G=W,V=J;if(X instanceof R)return $Q(K,V);else if(K instanceof R)return $Q(X,V);else{let{head:Y,tail:H}=X,M=K.head,F=K.tail,I=G(Y,M);if(I instanceof l)Z=X,Q=F,W=G,J=U(M,V);else if(I instanceof a)Z=H,Q=K,W=G,J=U(Y,V);else Z=H,Q=K,W=G,J=U(Y,V)}}}function J0(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof R)return d(K);else{let G=J.tail;if(G instanceof R){let V=J.head;return d(U(d(V),K))}else{let V=J.head,Y=G.head,H=G.tail,M=W0(V,Y,X,B([]));Z=H,Q=X,W=U(M,K)}}}}function X0(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof R)return J;else if(X instanceof o)if(J.tail instanceof R)return J.head;else Z=Q0(J,K,B([])),Q=new RQ,W=K;else if(J.tail instanceof R){let V=J.head;return d(V)}else Z=J0(J,K,B([])),Q=new o,W=K}}function TJ(Z,Q){if(Z instanceof R)return Z;else{let W=Z.tail;if(W instanceof R)return Z;else{let J=Z.head,X=W.head,K=W.tail,G,V=Q(J,X);if(V instanceof l)G=new o;else if(V instanceof a)G=new o;else G=new RQ;let Y=G,H=e9(K,Q,B([J]),Y,X,B([]));return X0(H,new o,Q)}}}function PJ(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof R)return;else{let{head:X,tail:K}=W;J(X),Z=K,Q=J}}}function SJ(Z,Q,W){if(Z)return Q;else return W()}function uQ(Z){return Z}function iW(Z){return uQ(Z)}var qZ=()=>globalThis?.document,KW="http://www.w3.org/1999/xhtml",GW=1,nW=3;var wJ=!!globalThis.HTMLElement?.prototype?.moveBefore;var w=B([]),VW=new VZ;var U0=new $Z,F0=new l,q0=new a;function YW(Z,Q){if(Z.name===Q.name)return q0;else if(Z.name<Q.name)return F0;else return U0}class EZ extends z{constructor(Z,Q,W){super();this.kind=Z,this.name=Q,this.value=W}}class cQ extends z{constructor(Z,Q,W){super();this.kind=Z,this.name=Q,this.value=W}}class t extends z{constructor(Z,Q,W,J,X,K,G,V){super();this.kind=Z,this.name=Q,this.handler=W,this.include=J,this.prevent_default=X,this.stop_propagation=K,this.debounce=G,this.throttle=V}}class pQ extends z{constructor(Z,Q,W){super();this.prevent_default=Z,this.stop_propagation=Q,this.message=W}}class bJ extends z{constructor(Z){super();this.kind=Z}}var oW=0,tW=1,eW=2,Z6=0,Q6=new bJ(Z6);var W6=2;function j0(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof R)return J;else{let X=W.head;if(X instanceof EZ){let K=X.name;if(K==="")Z=W.tail,Q=J;else if(K==="class"){let G=X.value;if(G==="")Z=W.tail,Q=J;else{let V=W.tail;if(V instanceof R){let Y=X;Z=V,Q=U(Y,J)}else{let Y=V.head;if(Y instanceof EZ)if(Y.name==="class"){let M=X.kind,F=G,I=V.tail,D=Y.value,j=F+" "+D,S=new EZ(M,"class",j);Z=U(S,I),Q=J}else{let M=X;Z=V,Q=U(M,J)}else{let H=X;Z=V,Q=U(H,J)}}}}else if(K==="style"){let G=X.value;if(G==="")Z=W.tail,Q=J;else{let V=W.tail;if(V instanceof R){let Y=X;Z=V,Q=U(Y,J)}else{let Y=V.head;if(Y instanceof EZ)if(Y.name==="style"){let M=X.kind,F=G,I=V.tail,D=Y.value,j=F+";"+D,S=new EZ(M,"style",j);Z=U(S,I),Q=J}else{let M=X;Z=V,Q=U(M,J)}else{let H=X;Z=V,Q=U(H,J)}}}}else{let G=X;Z=W.tail,Q=U(G,J)}}else{let K=X;Z=W.tail,Q=U(K,J)}}}}function J6(Z){if(Z instanceof R)return Z;else if(Z.tail instanceof R)return Z;else{let J=TJ(Z,(X,K)=>{return YW(K,X)});return j0(J,w)}}function gJ(Z,Q){return new EZ(oW,Z,Q)}function fJ(Z,Q){return new cQ(tW,Z,Q)}function _J(Z,Q,W,J,X,K,G){return new t(eW,Z,Q,W,J,X,K,G)}function e(Z,Q){return gJ(Z,Q)}function hJ(Z,Q){return fJ(Z,Q)}function B0(Z,Q){if(Q)return e(Z,"");else return hJ(Z,iW(!1))}function rK(Z){return e("autocapitalize",Z)}function X6(Z){return e("class",Z)}function iK(){return X6("")}function nK(Z){return e("id",Z)}function lK(Z){return e("spellcheck",(()=>{if(Z)return"true";else return"false"})())}function aK(Z,Q){if(Z==="")return X6("");else if(Q==="")return X6("");else return e("style",Z+":"+Q+";")}function oK(Z){return e("autocomplete",Z)}function tK(Z){return B0("disabled",Z)}function eK(Z){return e("max",Z)}function ZG(Z){return e("min",Z)}function QG(Z){return e("placeholder",Z)}function WG(Z){return e("step",Z)}function JG(Z){return e("type",Z)}function XG(Z){return e("value",Z)}class sQ extends z{constructor(Z,Q,W){super();this.synchronous=Z,this.before_paint=Q,this.after_paint=W}}class mJ extends z{constructor(Z,Q,W,J,X){super();this.dispatch=Z,this.emit=Q,this.select=W,this.root=J,this.provide=X}}var NQ=new sQ(B([]),B([]),B([]));function $J(Z,Q,W,J,X,K){let G=new mJ(Q,W,J,X,K);return PJ(Z.synchronous,(V)=>{return V(G)})}function K6(){return NQ}function UG(Z){return new sQ(B([(W)=>{let J=W.dispatch;return Z(J)}]),NQ.before_paint,NQ.after_paint)}function FG(Z){let Q=(W)=>{let J=W.root(),X=W.dispatch;return Z(X,J)};return new sQ(NQ.synchronous,NQ.before_paint,B([Q]))}function uJ(Z){return GZ(Z,NQ,(Q,W)=>{return new sQ(GZ(W.synchronous,Q.synchronous,XW),GZ(W.before_paint,Q.before_paint,XW),GZ(W.after_paint,Q.after_paint,XW))})}function c(Z){return Z}function XZ(){return null}function iQ(Z,Q){let W=Z?.get(Q);if(W!=null)return new C(W);else return new x(void 0)}function nQ(Z,Q){return Z&&Z.has(Q)}function oZ(Z,Q,W){return Z??=new Map,Z.set(Q,W),Z}function G6(Z,Q){return Z?.delete(Q),Z}class V6 extends z{}class Y6 extends z{constructor(Z,Q){super();this.key=Z,this.parent=Q}}class cJ extends z{constructor(Z,Q){super();this.index=Z,this.parent=Q}}var MW=new V6,aQ="\t",H6=`
`;function A0(Z,Q){while(!0){let W=Z,J=Q;if(J instanceof R)return!1;else{let{head:X,tail:K}=J,G=pW(W,X);if(G)return G;else Z=W,Q=K}}}function OZ(Z,Q,W){if(W==="")return new cJ(Q,Z);else return new Y6(W,Z)}function pJ(Z,Q){while(!0){let W=Z,J=Q;if(W instanceof V6)if(J instanceof R)return"";else{let X=J.tail;return XJ(X)}else if(W instanceof Y6){let X=W.key;Z=W.parent,Q=U(aQ,U(X,J))}else{let X=W.index;Z=W.parent,Q=U(aQ,U(lZ(X),J))}}}function T0(Z){return pJ(Z,B([]))}function dJ(Z,Q){if(Q instanceof R)return!1;else return A0(T0(Z),Q)}function M6(Z,Q){return pJ(Z,B([H6,Q]))}class jZ extends z{constructor(Z,Q,W,J,X){super();this.kind=Z,this.key=Q,this.mapper=W,this.children=J,this.keyed_children=X}}class DZ extends z{constructor(Z,Q,W,J,X,K,G,V,Y,H){super();this.kind=Z,this.key=Q,this.mapper=W,this.namespace=J,this.tag=X,this.attributes=K,this.children=G,this.keyed_children=V,this.self_closing=Y,this.void=H}}class BZ extends z{constructor(Z,Q,W,J){super();this.kind=Z,this.key=Q,this.mapper=W,this.content=J}}class tZ extends z{constructor(Z,Q,W,J,X,K,G){super();this.kind=Z,this.key=Q,this.mapper=W,this.namespace=J,this.tag=X,this.attributes=K,this.inner_html=G}}var AZ=0,eZ=1,jQ=2,U6=3;function DQ(Z,Q){if(Q==="")if(Z==="area")return!0;else if(Z==="base")return!0;else if(Z==="br")return!0;else if(Z==="col")return!0;else if(Z==="embed")return!0;else if(Z==="hr")return!0;else if(Z==="img")return!0;else if(Z==="input")return!0;else if(Z==="link")return!0;else if(Z==="meta")return!0;else if(Z==="param")return!0;else if(Z==="source")return!0;else if(Z==="track")return!0;else if(Z==="wbr")return!0;else return!1;else return!1}function rJ(Z,Q){if(Q instanceof jZ)return new jZ(Q.kind,Z,Q.mapper,Q.children,Q.keyed_children);else if(Q instanceof DZ)return new DZ(Q.kind,Z,Q.mapper,Q.namespace,Q.tag,Q.attributes,Q.children,Q.keyed_children,Q.self_closing,Q.void);else if(Q instanceof BZ)return new BZ(Q.kind,Z,Q.mapper,Q.content);else return new tZ(Q.kind,Z,Q.mapper,Q.namespace,Q.tag,Q.attributes,Q.inner_html)}function UW(Z,Q,W,J){return new jZ(AZ,Z,Q,W,J)}function BQ(Z,Q,W,J,X,K,G,V,Y){return new DZ(eZ,Z,Q,W,J,J6(X),K,G,V,Y)}function F6(Z,Q,W){return new BZ(jQ,Z,Q,W)}function iJ(Z,Q,W,J,X,K){return new tZ(U6,Z,Q,W,J,J6(X),K)}var q6=(Z,Q)=>Z===Q,TZ=(Z,Q)=>{if(Z===Q)return!0;if(Z==null||Q==null)return!1;let W=typeof Z;if(W!==typeof Q)return!1;if(W!=="object")return!1;if(Z.constructor!==Q.constructor)return!1;if(Array.isArray(Z))return L0(Z,Q);return C0(Z,Q)},L0=(Z,Q)=>{let W=Z.length;if(W!==Q.length)return!1;while(W--)if(!TZ(Z[W],Q[W]))return!1;return!0},C0=(Z,Q)=>{let W=Object.keys(Z),J=W.length;if(Object.keys(Q).length!==J)return!1;while(J--){let X=W[J];if(!Object.hasOwn(Q,X))return!1;if(!TZ(Z[X],Q[X]))return!1}return!0};class gZ extends z{constructor(Z,Q,W){super();this.handlers=Z,this.dispatched_paths=Q,this.next_dispatched_paths=W}}class I6 extends z{constructor(Z,Q){super();this.path=Z,this.handler=Q}}class R6 extends z{constructor(Z){super();this.path=Z}}function N6(){return new gZ(XZ(),w,w)}function oJ(Z){return new gZ(Z.handlers,Z.next_dispatched_paths,w)}function tJ(Z,Q,W){return G6(Z,M6(Q,W))}function FW(Z,Q,W){let J=tJ(Z.handlers,Q,W);return new gZ(J,Z.dispatched_paths,Z.next_dispatched_paths)}function nJ(Z,Q,W){return GZ(W,Z,(J,X)=>{if(X instanceof t){let K=X.name;return tJ(J,Q,K)}else return J})}function O6(Z,Q,W,J){let X=iQ(Z.handlers,Q+H6+W);if(X instanceof C){let K=X[0],G=uZ(J,K);if(G instanceof C){let V=G[0];return new I6(Q,V)}else return new R6(Q)}else return new R6(Q)}function j6(Z,Q){let W=U(Q.path,Z.next_dispatched_paths),J=new gZ(Z.handlers,Z.dispatched_paths,W);if(Q instanceof I6){let X=Q.handler;return[J,new C(X)]}else return[J,new x(void 0)]}function D6(Z,Q,W,J){let X=O6(Z,Q,W,J);return((K)=>{return j6(Z,K)})(X)}function qW(Z,Q){return dJ(Q,Z.dispatched_paths)}function eJ(Z,Q,W,J,X){return oZ(Z,M6(W,J),vQ(X,(K)=>{return new pQ(K.prevent_default,K.stop_propagation,c(Q)(K.message))}))}function AQ(Z,Q,W,J,X){let K=eJ(Z.handlers,Q,W,J,X);return new gZ(K,Z.dispatched_paths,Z.next_dispatched_paths)}function lJ(Z,Q,W,J){return GZ(J,Z,(X,K)=>{if(K instanceof t){let{name:G,handler:V}=K;return eJ(X,Q,W,G,V)}else return X})}function cZ(Z,Q){let W=q6(Z,c);if(q6(Q,c))return Z;else if(W)return Q;else return(X)=>{return Z(Q(X))}}function aJ(Z,Q,W,J){while(!0){let X=Z,K=Q,G=W,V=J;if(V instanceof R)return X;else{let{head:Y,tail:H}=V;Z=Z8(X,K,G,Y),Q=K,W=G+1,J=H}}}function Z8(Z,Q,W,J){if(J instanceof jZ){let X=J.children,K=OZ(Q,W,J.key);return aJ(Z,K,0,X)}else if(J instanceof DZ){let{attributes:X,children:K}=J,G=OZ(Q,W,J.key),Y=nJ(Z,G,X);return aJ(Y,G,0,K)}else if(J instanceof BZ)return Z;else{let X=J.attributes,K=OZ(Q,W,J.key);return nJ(Z,K,X)}}function fZ(Z,Q,W,J){let X=Z8(Z.handlers,Q,W,J);return new gZ(X,Z.dispatched_paths,Z.next_dispatched_paths)}function z6(Z,Q,W,J,X){while(!0){let K=Z,G=Q,V=W,Y=J,H=X;if(H instanceof R)return K;else{let{head:M,tail:F}=H;Z=Q8(K,G,V,Y,M),Q=G,W=V,J=Y+1,X=F}}}function Q8(Z,Q,W,J,X){if(X instanceof jZ){let K=X.children,G=OZ(W,J,X.key),V=cZ(Q,X.mapper);return z6(Z,V,G,0,K)}else if(X instanceof DZ){let{attributes:K,children:G}=X,V=OZ(W,J,X.key),Y=cZ(Q,X.mapper),M=lJ(Z,Y,V,K);return z6(M,Y,V,0,G)}else if(X instanceof BZ)return Z;else{let K=X.attributes,G=OZ(W,J,X.key),V=cZ(Q,X.mapper);return lJ(Z,V,G,K)}}function _Z(Z,Q,W,J,X){let K=Q8(Z.handlers,Q,W,J,X);return new gZ(K,Z.dispatched_paths,Z.next_dispatched_paths)}function W8(Z){return _Z(N6(),c,MW,0,Z)}function J8(Z,Q,W,J,X){let K=z6(Z.handlers,Q,W,J,X);return new gZ(K,Z.dispatched_paths,Z.next_dispatched_paths)}function QQ(Z,Q,W){return BQ("",c,"",Z,Q,W,XZ(),!1,DQ(Z,""))}function w0(Z,Q,W,J){return BQ("",c,Z,Q,W,J,XZ(),!1,DQ(Q,Z))}function RW(Z){return F6("",c,Z)}function X8(){return F6("",c,"")}function yG(Z){return UW("",c,Z,XZ())}function K8(Z,Q,W,J){return iJ("",c,Z,Q,W,J)}function fG(Z){return RW(Z)}function _G(Z,Q){return K8("","style",Z,Q)}function hG(Z,Q){return QQ("div",Z,Q)}function vG(Z,Q){return QQ("pre",Z,Q)}function mG(Z,Q){return QQ("code",Z,Q)}function $G(Z,Q){return QQ("span",Z,Q)}function uG(Z){return QQ("input",Z,w)}class oQ extends z{constructor(Z,Q,W,J){super();this.index=Z,this.removed=Q,this.changes=W,this.children=J}}class V8 extends z{constructor(Z,Q){super();this.kind=Z,this.content=Q}}class Y8 extends z{constructor(Z,Q){super();this.kind=Z,this.inner_html=Q}}class H8 extends z{constructor(Z,Q,W){super();this.kind=Z,this.added=Q,this.removed=W}}class M8 extends z{constructor(Z,Q,W){super();this.kind=Z,this.key=Q,this.before=W}}class U8 extends z{constructor(Z,Q,W){super();this.kind=Z,this.index=Q,this.with=W}}class F8 extends z{constructor(Z,Q){super();this.kind=Z,this.index=Q}}class q8 extends z{constructor(Z,Q,W){super();this.kind=Z,this.children=Q,this.before=W}}var B6=0,A6=1,T6=2,P6=3,S6=4,L6=5,C6=6;function w6(Z,Q,W,J){return new oQ(Z,Q,W,J)}function R8(Z){return new V8(B6,Z)}function z8(Z){return new Y8(A6,Z)}function E6(Z,Q){return new H8(T6,Z,Q)}function I8(Z,Q){return new M8(P6,Z,Q)}function N8(Z){return new F8(S6,Z)}function WQ(Z,Q){return new U8(L6,Z,Q)}function x6(Z,Q){return new q8(C6,Z,Q)}class j8 extends z{constructor(Z,Q,W,J,X,K,G,V){super();this.kind=Z,this.open_shadow_root=Q,this.will_adopt_styles=W,this.observed_attributes=J,this.observed_properties=X,this.requested_contexts=K,this.provided_contexts=G,this.vdom=V}}class D8 extends z{constructor(Z,Q){super();this.kind=Z,this.patch=Q}}class B8 extends z{constructor(Z,Q,W){super();this.kind=Z,this.name=Q,this.data=W}}class A8 extends z{constructor(Z,Q,W){super();this.kind=Z,this.key=Q,this.value=W}}class IW extends z{constructor(Z,Q){super();this.kind=Z,this.messages=Q}}class NW extends z{constructor(Z,Q,W){super();this.kind=Z,this.name=Q,this.value=W}}class OW extends z{constructor(Z,Q,W){super();this.kind=Z,this.name=Q,this.value=W}}class jW extends z{constructor(Z,Q,W,J){super();this.kind=Z,this.path=Q,this.name=W,this.event=J}}class k6 extends z{constructor(Z,Q,W){super();this.kind=Z,this.key=Q,this.value=W}}var g0=0,f0=1,_0=2,h0=3;function T8(Z,Q,W,J,X,K,G){return new j8(g0,Z,Q,W,J,X,K,G)}function y6(Z){return new D8(f0,Z)}function P8(Z,Q){return new B8(_0,Z,Q)}function S8(Z,Q){return new A8(h0,Z,Q)}class DW extends z{constructor(Z,Q){super();this.patch=Z,this.events=Q}}class w8 extends z{constructor(Z,Q,W){super();this.added=Z,this.removed=Q,this.events=W}}function v0(Z,Q,W,J){if(W==="input"&&Q==="")return qW(Z,J);else if(W==="select"&&Q==="")return qW(Z,J);else if(W==="textarea"&&Q==="")return qW(Z,J);else return!1}function C8(Z,Q,W,J,X,K,G,V){while(!0){let Y=Z,H=Q,M=W,F=J,I=X,D=K,j=G,S=V;if(I instanceof R)if(D instanceof R)return new w8(j,S,F);else{let N=D.head;if(N instanceof t){let L=N,O=D.tail,T=N.name,E=N.handler,q=U(L,j),A=AQ(F,M,H,T,E);Z=Y,Q=H,W=M,J=A,X=I,K=O,G=q,V=S}else{let L=N,O=D.tail,T=U(L,j);Z=Y,Q=H,W=M,J=F,X=I,K=O,G=T,V=S}}else if(D instanceof R){let N=I.head;if(N instanceof t){let L=N,O=I.tail,T=N.name,E=U(L,S),q=FW(F,H,T);Z=Y,Q=H,W=M,J=q,X=O,K=D,G=j,V=E}else{let L=N,O=I.tail,T=U(L,S);Z=Y,Q=H,W=M,J=F,X=O,K=D,G=j,V=T}}else{let{head:N,tail:L}=I,O=D.head,T=D.tail,E=YW(N,O);if(E instanceof l)if(N instanceof t){let q=N.name,A=U(N,S),P=FW(F,H,q);Z=Y,Q=H,W=M,J=P,X=L,K=D,G=j,V=A}else{let q=U(N,S);Z=Y,Q=H,W=M,J=F,X=L,K=D,G=j,V=q}else if(E instanceof a)if(N instanceof EZ)if(O instanceof EZ){let q,A=O.name;if(A==="value")q=Y||N.value!==O.value;else if(A==="checked")q=Y||N.value!==O.value;else if(A==="selected")q=Y||N.value!==O.value;else q=N.value!==O.value;let P=q,k;if(P)k=U(O,j);else k=j;let b=k;Z=Y,Q=H,W=M,J=F,X=L,K=T,G=b,V=S}else if(O instanceof t){let{name:q,handler:A}=O,P=U(O,j),k=U(N,S),b=AQ(F,M,H,q,A);Z=Y,Q=H,W=M,J=b,X=L,K=T,G=P,V=k}else{let q=U(O,j),A=U(N,S);Z=Y,Q=H,W=M,J=F,X=L,K=T,G=q,V=A}else if(N instanceof cQ)if(O instanceof cQ){let q,A=O.name;if(A==="scrollLeft")q=!0;else if(A==="scrollRight")q=!0;else if(A==="value")q=Y||!TZ(N.value,O.value);else if(A==="checked")q=Y||!TZ(N.value,O.value);else if(A==="selected")q=Y||!TZ(N.value,O.value);else q=!TZ(N.value,O.value);let P=q,k;if(P)k=U(O,j);else k=j;let b=k;Z=Y,Q=H,W=M,J=F,X=L,K=T,G=b,V=S}else if(O instanceof t){let{name:q,handler:A}=O,P=U(O,j),k=U(N,S),b=AQ(F,M,H,q,A);Z=Y,Q=H,W=M,J=b,X=L,K=T,G=P,V=k}else{let q=U(O,j),A=U(N,S);Z=Y,Q=H,W=M,J=F,X=L,K=T,G=q,V=A}else if(O instanceof t){let{name:q,handler:A}=O,P=N.prevent_default.kind!==O.prevent_default.kind||N.stop_propagation.kind!==O.stop_propagation.kind||N.debounce!==O.debounce||N.throttle!==O.throttle,k;if(P)k=U(O,j);else k=j;let b=k,f=AQ(F,M,H,q,A);Z=Y,Q=H,W=M,J=f,X=L,K=T,G=b,V=S}else{let q=N.name,A=U(O,j),P=U(N,S),k=FW(F,H,q);Z=Y,Q=H,W=M,J=k,X=L,K=T,G=A,V=P}else if(O instanceof t){let{name:q,handler:A}=O,P=U(O,j),k=AQ(F,M,H,q,A);Z=Y,Q=H,W=M,J=k,X=I,K=T,G=P,V=S}else{let q=U(O,j);Z=Y,Q=H,W=M,J=F,X=I,K=T,G=q,V=S}}}}function b6(Z,Q,W,J,X,K,G,V,Y,H,M,F,I,D){while(!0){let j=Z,S=Q,N=W,L=J,O=X,T=K,E=G,q=V,A=Y,P=H,k=M,b=F,f=I,n=D;if(j instanceof R)if(N instanceof R)return new DW(new oQ(A,E,k,b),n);else{let RZ=J8(n,f,P,q,N),HZ=x6(N,q-T),p=U(HZ,k);return new DW(new oQ(A,E,p,b),RZ)}else if(N instanceof R){let{head:RZ,tail:HZ}=j,p;if(RZ.key===""||!nQ(O,RZ.key))p=E+1;else p=E;let _=p,v=fZ(n,P,q,RZ);Z=HZ,Q=S,W=N,J=L,X=O,K=T,G=_,V=q,Y=A,H=P,M=k,F=b,I=f,D=v}else{let RZ=j.head,HZ=N.head;if(RZ.key!==HZ.key){let p=j.tail,s=N.tail,_=iQ(S,HZ.key);if(nQ(L,RZ.key))if(_ instanceof C){let y=_[0];if(nQ(O,RZ.key))Z=p,Q=S,W=N,J=L,X=O,K=T-1,G=E,V=q,Y=A,H=P,M=k,F=b,I=f,D=n;else{let m=q-T,g=U(I8(HZ.key,m),k),r=oZ(O,HZ.key,void 0),$=T+1;Z=U(y,j),Q=S,W=N,J=L,X=r,K=$,G=E,V=q,Y=A,H=P,M=g,F=b,I=f,D=n}}else{let y=q-T,h=_Z(n,f,P,q,HZ),m=x6(B([HZ]),y),g=U(m,k);Z=j,Q=S,W=s,J=L,X=O,K=T+1,G=E,V=q+1,Y=A,H=P,M=g,F=b,I=f,D=h}else if(_ instanceof C){let y=q-T,h=U(N8(y),k),m=fZ(n,P,q,RZ),g=T-1;Z=p,Q=S,W=N,J=L,X=O,K=g,G=E,V=q,Y=A,H=P,M=h,F=b,I=f,D=m}else{let y=WQ(q-T,HZ),h,g=fZ(n,P,q,RZ);h=_Z(g,f,P,q,HZ);let r=h;Z=p,Q=S,W=s,J=L,X=O,K=T,G=E,V=q+1,Y=A,H=P,M=U(y,k),F=b,I=f,D=r}}else{let p=j.head;if(p instanceof jZ){let s=N.head;if(s instanceof jZ){let _=p,v=j.tail,y=s,h=N.tail,m=cZ(f,y.mapper),g=OZ(P,q,y.key),r=b6(_.children,_.keyed_children,y.children,y.keyed_children,XZ(),0,0,0,q,g,w,w,m,n),$,i=r.patch;if(i.changes instanceof R)if(i.children instanceof R)if(i.removed===0)$=b;else $=U(r.patch,b);else $=U(r.patch,b);else $=U(r.patch,b);let PZ=$;Z=v,Q=S,W=h,J=L,X=O,K=T,G=E,V=q+1,Y=A,H=P,M=k,F=PZ,I=f,D=r.events}else{let _=p,v=j.tail,y=s,h=N.tail,m=WQ(q-T,y),g,$=fZ(n,P,q,_);g=_Z($,f,P,q,y);let i=g;Z=v,Q=S,W=h,J=L,X=O,K=T,G=E,V=q+1,Y=A,H=P,M=U(m,k),F=b,I=f,D=i}}else if(p instanceof DZ){let s=N.head;if(s instanceof DZ){let _=p,v=s;if(_.namespace===v.namespace&&_.tag===v.tag){let y=j.tail,h=N.tail,m=cZ(f,v.mapper),g=OZ(P,q,v.key),r=v0(n,v.namespace,v.tag,g),$=C8(r,g,m,n,_.attributes,v.attributes,w,w),i,xZ,PZ;i=$.added,xZ=$.removed,PZ=$.events;let dZ;if(i instanceof R&&xZ instanceof R)dZ=w;else dZ=B([E6(i,xZ)]);let GQ=dZ,VQ=b6(_.children,_.keyed_children,v.children,v.keyed_children,XZ(),0,0,0,q,g,GQ,w,m,PZ),mZ,sZ=VQ.patch;if(sZ.changes instanceof R)if(sZ.children instanceof R)if(sZ.removed===0)mZ=b;else mZ=U(VQ.patch,b);else mZ=U(VQ.patch,b);else mZ=U(VQ.patch,b);let a8=mZ;Z=y,Q=S,W=h,J=L,X=O,K=T,G=E,V=q+1,Y=A,H=P,M=k,F=a8,I=f,D=VQ.events}else{let y=p,h=j.tail,m=s,g=N.tail,r=WQ(q-T,m),$,xZ=fZ(n,P,q,y);$=_Z(xZ,f,P,q,m);let PZ=$;Z=h,Q=S,W=g,J=L,X=O,K=T,G=E,V=q+1,Y=A,H=P,M=U(r,k),F=b,I=f,D=PZ}}else{let _=p,v=j.tail,y=s,h=N.tail,m=WQ(q-T,y),g,$=fZ(n,P,q,_);g=_Z($,f,P,q,y);let i=g;Z=v,Q=S,W=h,J=L,X=O,K=T,G=E,V=q+1,Y=A,H=P,M=U(m,k),F=b,I=f,D=i}}else if(p instanceof BZ){let s=N.head;if(s instanceof BZ){let _=p,v=s;if(_.content===v.content){let y=j.tail,h=N.tail;Z=y,Q=S,W=h,J=L,X=O,K=T,G=E,V=q+1,Y=A,H=P,M=k,F=b,I=f,D=n}else{let y=j.tail,h=s,m=N.tail,g=w6(q,0,B([R8(h.content)]),w);Z=y,Q=S,W=m,J=L,X=O,K=T,G=E,V=q+1,Y=A,H=P,M=k,F=U(g,b),I=f,D=n}}else{let _=p,v=j.tail,y=s,h=N.tail,m=WQ(q-T,y),g,$=fZ(n,P,q,_);g=_Z($,f,P,q,y);let i=g;Z=v,Q=S,W=h,J=L,X=O,K=T,G=E,V=q+1,Y=A,H=P,M=U(m,k),F=b,I=f,D=i}}else{let s=N.head;if(s instanceof tZ){let _=p,v=j.tail,y=s,h=N.tail,m=cZ(f,y.mapper),g=OZ(P,q,y.key),r=C8(!1,g,m,n,_.attributes,y.attributes,w,w),$,i,xZ;$=r.added,i=r.removed,xZ=r.events;let PZ;if($ instanceof R&&i instanceof R)PZ=w;else PZ=B([E6($,i)]);let dZ=PZ,GQ;if(_.inner_html===y.inner_html)GQ=dZ;else GQ=U(z8(y.inner_html),dZ);let mZ=GQ,sZ;if(mZ instanceof R)sZ=b;else sZ=U(w6(q,0,mZ,B([])),b);let s6=sZ;Z=v,Q=S,W=h,J=L,X=O,K=T,G=E,V=q+1,Y=A,H=P,M=k,F=s6,I=f,D=xZ}else{let _=p,v=j.tail,y=s,h=N.tail,m=WQ(q-T,y),g,$=fZ(n,P,q,_);g=_Z($,f,P,q,y);let i=g;Z=v,Q=S,W=h,J=L,X=O,K=T,G=E,V=q+1,Y=A,H=P,M=U(m,k),F=b,I=f,D=i}}}}}}function PQ(Z,Q,W){return b6(B([Q]),XZ(),B([W]),XZ(),XZ(),0,0,0,0,MW,w,w,c,oJ(Z))}var{setTimeout:m0,clearTimeout:g6}=globalThis,$0=(Z,Q)=>qZ().createElementNS(Z,Q),u0=(Z)=>qZ().createTextNode(Z),c0=()=>qZ().createDocumentFragment(),SQ=(Z,Q,W)=>Z.insertBefore(Q,W),x8=wJ?(Z,Q,W)=>Z.moveBefore(Q,W):SQ,p0=(Z,Q)=>Z.removeChild(Q),d0=(Z,Q)=>Z.getAttribute(Q),k8=(Z,Q,W)=>Z.setAttribute(Q,W),s0=(Z,Q)=>Z.removeAttribute(Q),r0=(Z,Q,W,J)=>Z.addEventListener(Q,W,J),y8=(Z,Q,W)=>Z.removeEventListener(Q,W),i0=(Z,Q)=>Z.innerHTML=Q,n0=(Z,Q)=>Z.data=Q,hZ=Symbol("lustre");class f8{constructor(Z,Q,W,J){this.kind=Z,this.key=J,this.parent=Q,this.children=[],this.node=W,this.handlers=new Map,this.throttles=new Map,this.debouncers=new Map}get parentNode(){return this.kind===AZ?this.node.parentNode:this.node}}var vZ=(Z,Q,W,J,X)=>{let K=new f8(Z,Q,W,X);return W[hZ]=K,Q?.children.splice(J,0,K),K},l0=(Z)=>{let Q="";for(let W=Z[hZ];W.parent;W=W.parent)if(W.key)Q=`${aQ}${W.key}${Q}`;else{let J=W.parent.children.indexOf(W);Q=`${aQ}${J}${Q}`}return Q.slice(1)};class _6{#Z=null;#X;#W;#J=!1;constructor(Z,Q,W,{exposeKeys:J=!1}={}){this.#Z=Z,this.#X=Q,this.#W=W,this.#J=J}mount(Z){vZ(eZ,null,this.#Z,0,null),this.#O(this.#Z,null,this.#Z[hZ],0,Z)}push(Z){this.#Q.push({node:this.#Z[hZ],patch:Z}),this.#K()}#Q=[];#K(){let Z=this.#Q;while(Z.length){let{node:Q,patch:W}=Z.pop(),{children:J}=Q,{changes:X,removed:K,children:G}=W;if(JQ(X,(V)=>this.#G(Q,V)),K)this.#F(Q,J.length-K,K);JQ(G,(V)=>{let Y=J[V.index|0];this.#Q.push({node:Y,patch:V})})}}#G(Z,Q){switch(Q.kind){case B6:this.#T(Z,Q);break;case A6:this.#j(Z,Q);break;case T6:this.#R(Z,Q);break;case P6:this.#M(Z,Q);break;case S6:this.#I(Z,Q);break;case L6:this.#U(Z,Q);break;case C6:this.#Y(Z,Q);break}}#Y(Z,{children:Q,before:W}){let J=c0(),X=this.#H(Z,W);this.#N(J,null,Z,W|0,Q),SQ(Z.parentNode,J,X)}#U(Z,{index:Q,with:W}){this.#F(Z,Q|0,1);let J=this.#H(Z,Q);this.#O(Z.parentNode,J,Z,Q|0,W)}#H(Z,Q){Q=Q|0;let{children:W}=Z,J=W.length;if(Q<J)return W[Q].node;let X=W[J-1];if(!X&&Z.kind!==AZ)return null;if(!X)X=Z;while(X.kind===AZ&&X.children.length)X=X.children[X.children.length-1];return X.node.nextSibling}#M(Z,{key:Q,before:W}){W=W|0;let{children:J,parentNode:X}=Z,K=J[W].node,G=J[W];for(let M=W+1;M<J.length;++M){let F=J[M];if(J[M]=G,G=F,F.key===Q){J[W]=F;break}}let{kind:V,node:Y,children:H}=G;if(x8(X,Y,K),V===AZ)this.#V(X,H,K)}#V(Z,Q,W){for(let J=0;J<Q.length;++J){let{kind:X,node:K,children:G}=Q[J];if(x8(Z,K,W),X===AZ)this.#V(Z,G,W)}}#I(Z,{index:Q}){this.#F(Z,Q,1)}#F(Z,Q,W){let{children:J,parentNode:X}=Z,K=J.splice(Q,W);for(let G=0;G<K.length;++G){let{kind:V,node:Y,children:H}=K[G];if(p0(X,Y),this.#q(K[G]),V===AZ)K.push(...H)}}#q(Z){let{debouncers:Q,children:W}=Z;for(let{timeout:J}of Q.values())if(J)g6(J);Q.clear(),JQ(W,(J)=>this.#q(J))}#R({node:Z,handlers:Q,throttles:W,debouncers:J},{added:X,removed:K}){JQ(K,({name:G})=>{if(Q.delete(G))y8(Z,G,f6),this.#z(W,G,0),this.#z(J,G,0);else s0(Z,G),g8[G]?.removed?.(Z,G)}),JQ(X,(G)=>this.#A(Z,G))}#T({node:Z},{content:Q}){n0(Z,Q??"")}#j({node:Z},{inner_html:Q}){i0(Z,Q??"")}#N(Z,Q,W,J,X){JQ(X,(K)=>this.#O(Z,Q,W,J++,K))}#O(Z,Q,W,J,X){switch(X.kind){case eZ:{let K=this.#D(W,J,X);this.#N(K,null,K[hZ],0,X.children),SQ(Z,K,Q);break}case jQ:{let K=this.#B(W,J,X);SQ(Z,K,Q);break}case AZ:{let K=this.#B(W,J,X);SQ(Z,K,Q),this.#N(Z,Q,K[hZ],0,X.children);break}case U6:{let K=this.#D(W,J,X);this.#j({node:K},X),SQ(Z,K,Q);break}}}#D(Z,Q,{kind:W,key:J,tag:X,namespace:K,attributes:G}){let V=$0(K||KW,X);if(vZ(W,Z,V,Q,J),this.#J&&J)k8(V,"data-lustre-key",J);return JQ(G,(Y)=>this.#A(V,Y)),V}#B(Z,Q,{kind:W,key:J,content:X}){let K=u0(X??"");return vZ(W,Z,K,Q,J),K}#A(Z,Q){let{debouncers:W,handlers:J,throttles:X}=Z[hZ],{kind:K,name:G,value:V,prevent_default:Y,debounce:H,throttle:M}=Q;switch(K){case oW:{let F=V??"";if(G==="virtual:defaultValue"){Z.defaultValue=F;return}else if(G==="virtual:defaultChecked"){Z.defaultChecked=!0;return}else if(G==="virtual:defaultSelected"){Z.defaultSelected=!0;return}if(F!==d0(Z,G))k8(Z,G,F);g8[G]?.added?.(Z,F);break}case tW:Z[G]=V;break;case eW:{if(J.has(G))y8(Z,G,f6);let F=Y.kind===Z6;r0(Z,G,f6,{passive:F}),this.#z(X,G,M),this.#z(W,G,H),J.set(G,(I)=>this.#P(Q,I));break}}}#z(Z,Q,W){let J=Z.get(Q);if(W>0)if(J)J.delay=W;else Z.set(Q,{delay:W});else if(J){let{timeout:X}=J;if(X)g6(X);Z.delete(Q)}}#P(Z,Q){let{currentTarget:W,type:J}=Q,{debouncers:X,throttles:K}=W[hZ],G=l0(W),{prevent_default:V,stop_propagation:Y,include:H}=Z;if(V.kind===W6)Q.preventDefault();if(Y.kind===W6)Q.stopPropagation();if(J==="submit")Q.detail??={},Q.detail.formData=[...new FormData(Q.target,Q.submitter).entries()];let M=this.#X(Q,G,J,H),F=K.get(J);if(F){let D=Date.now(),j=F.last||0;if(D>j+F.delay)F.last=D,F.lastEvent=Q,this.#W(Q,M)}let I=X.get(J);if(I)g6(I.timeout),I.timeout=m0(()=>{if(Q===K.get(J)?.lastEvent)return;this.#W(Q,M)},I.delay);if(!F&&!I)this.#W(Q,M)}}var JQ=(Z,Q)=>{if(Array.isArray(Z))for(let W=0;W<Z.length;W++)Q(Z[W]);else if(Z)for(Z;Z.head;Z=Z.tail)Q(Z.head)},f6=(Z)=>{let{currentTarget:Q,type:W}=Z;Q[hZ].handlers.get(W)(Z)},b8=(Z)=>{return{added(Q){Q[Z]=!0},removed(Q){Q[Z]=!1}}},a0=(Z)=>{return{added(Q,W){Q[Z]=W}}},g8={checked:b8("checked"),selected:b8("selected"),value:a0("value"),autofocus:{added(Z){queueMicrotask(()=>{Z.focus?.()})}},autoplay:{added(Z){try{Z.play?.()}catch(Q){console.error(Q)}}}};function o0(Z,Q,W){while(!0){let J=Z,X=Q,K=W;if(J instanceof R)return[X,d(K)];else{let G=J.tail,V=J.head[0],Y=J.head[1],H=rJ(V,Y),M;if(V==="")M=X;else M=oZ(X,V,H);let F=M,I=U(H,K);Z=G,Q=F,W=I}}}function h6(Z){return o0(Z,XZ(),w)}function _8(Z,Q,W){let J=h6(W),X,K;return X=J[0],K=J[1],BQ("",c,"",Z,Q,K,X,!1,DQ(Z,""))}function h8(Z,Q,W,J){let X=h6(J),K,G;return K=X[0],G=X[1],BQ("",c,Z,Q,W,G,K,!1,DQ(Q,Z))}function v8(Z){let Q=h6(Z),W,J;return W=Q[0],J=Q[1],UW("",c,J,W)}var m8=(Z)=>{let Q=vZ(eZ,null,Z,0,null),W=0;for(let G=Z.firstChild;G;G=G.nextSibling)if($8(G))W+=1;if(W===0){let G=qZ().createTextNode("");return vZ(jQ,Q,G,0,null),Z.replaceChildren(G),X8()}if(W===1)return v6(Q,Z).head[1];let J=qZ().createTextNode(""),X=vZ(AZ,Q,J,0,null),K=v6(X,Z);return Z.insertBefore(J,Z.firstChild),v8(K)},$8=(Z)=>{switch(Z.nodeType){case GW:return!0;case nW:return!!Z.data;default:return!1}},t0=(Z,Q,W,J)=>{if(!$8(Q))return null;switch(Q.nodeType){case GW:{let X=vZ(eZ,Z,Q,J,W),K=Q.localName,G=Q.namespaceURI,V=!G||G===KW;if(V&&e0.includes(K))ZX(K,Q);let Y=QX(Q),H=v6(X,Q);return V?_8(K,Y,H):h8(G,K,Y,H)}case nW:return vZ(jQ,Z,Q,J,null),RW(Q.data);default:return null}},e0=["input","select","textarea"],ZX=(Z,Q)=>{let{value:W,checked:J}=Q;if(Z==="input"&&Q.type==="checkbox"&&!J)return;if(Z==="input"&&Q.type==="radio"&&!J)return;if(Q.type!=="checkbox"&&Q.type!=="radio"&&!W)return;queueMicrotask(()=>{if(Q.value=W,Q.checked=J,Q.dispatchEvent(new Event("input",{bubbles:!0})),Q.dispatchEvent(new Event("change",{bubbles:!0})),qZ().activeElement!==Q)Q.dispatchEvent(new Event("blur",{bubbles:!0}))})},v6=(Z,Q)=>{let W=null,J=Q.firstChild,X=null,K=0;while(J){let G=J.nodeType===GW?J.getAttribute("data-lustre-key"):null;if(G!=null)J.removeAttribute("data-lustre-key");let V=t0(Z,J,G,K),Y=J.nextSibling;if(V){let H=new IZ([G??"",V],null);if(X)X=X.tail=H;else X=W=H;K+=1}else Q.removeChild(J);J=Y}if(!X)return w;return X.tail=w,W},QX=(Z)=>{let Q=Z.attributes.length,W=w;while(Q-- >0){let J=Z.attributes[Q];if(J.name==="xmlns")continue;W=new IZ(WX(J),W)}return W},WX=(Z)=>{let{localName:Q,value:W}=Z;return e(Q,W)};var tQ=()=>!!qZ();class BW{constructor(Z,[Q,W],J,X){this.root=Z,this.#Z=Q,this.#X=J,this.#W=X,this.root.addEventListener("context-request",(V)=>{if(!(V.context&&V.callback))return;if(!this.#G.has(V.context))return;V.stopImmediatePropagation();let Y=this.#G.get(V.context);if(V.subscribe){let H=()=>{Y.subscribers=Y.subscribers.filter((M)=>M!==V.callback)};Y.subscribers.push([V.callback,H]),V.callback(Y.value,H)}else V.callback(Y.value)});let K=(V,Y,H)=>O6(this.#Q,Y,H,V),G=(V,Y)=>{let[H,M]=j6(this.#Q,Y);if(this.#Q=H,M.isOk()){let F=M[0];if(F.stop_propagation)V.stopPropagation();if(F.prevent_default)V.preventDefault();this.dispatch(F.message,!1)}};this.#K=new _6(this.root,K,G),this.#J=m8(this.root),this.#Q=N6(),this.#q(W),this.#R()}root=null;dispatch(Z,Q=!1){if(this.#Y)this.#U.push(Z);else{let[W,J]=this.#W(this.#Z,Z);this.#Z=W,this.#F(J,Q)}}emit(Z,Q){(this.root.host??this.root).dispatchEvent(new CustomEvent(Z,{detail:Q,bubbles:!0,composed:!0}))}provide(Z,Q){if(!this.#G.has(Z))this.#G.set(Z,{value:Q,subscribers:[]});else{let W=this.#G.get(Z);if(TZ(W.value,Q))return;W.value=Q;for(let J=W.subscribers.length-1;J>=0;J--){let[X,K]=W.subscribers[J];if(!X){W.subscribers.splice(J,1);continue}X(Q,K)}}}#Z;#X;#W;#J;#Q;#K;#G=new Map;#Y=!1;#U=[];#H=w;#M=w;#V=null;#I={dispatch:(Z)=>this.dispatch(Z),emit:(Z,Q)=>this.emit(Z,Q),select:()=>{},root:()=>this.root,provide:(Z,Q)=>this.provide(Z,Q)};#F(Z,Q=!1){if(this.#q(Z),!this.#V)if(Q)this.#V="sync",queueMicrotask(()=>this.#R());else this.#V=requestAnimationFrame(()=>this.#R())}#q(Z){this.#Y=!0;while(!0){for(let W=Z.synchronous;W.tail;W=W.tail)W.head(this.#I);if(this.#H=c8(this.#H,Z.before_paint),this.#M=c8(this.#M,Z.after_paint),!this.#U.length)break;let Q=this.#U.shift();[this.#Z,Z]=this.#W(this.#Z,Q)}this.#Y=!1}#R(){this.#V=null;let Z=this.#X(this.#Z),{patch:Q,events:W}=PQ(this.#Q,this.#J,Z);if(this.#Q=W,this.#J=Z,this.#K.push(Q),this.#H instanceof IZ){let J=u8(this.#H);this.#H=w,queueMicrotask(()=>{this.#F(J,!0)})}if(this.#M instanceof IZ){let J=u8(this.#M);this.#M=w,requestAnimationFrame(()=>{this.#F(J,!0)})}}}function u8(Z){return{synchronous:Z,after_paint:w,before_paint:w}}function c8(Z,Q){if(Z instanceof R)return Q;else if(Q instanceof R)return Z;else return fQ(Z,Q)}class $6 extends z{constructor(Z){super();this.message=Z}}class u6 extends z{constructor(Z){super();this.callback=Z}}class c6 extends z{constructor(Z){super();this.callback=Z}}class pZ extends z{constructor(Z){super();this.message=Z}}class XQ extends z{constructor(Z,Q){super();this.name=Z,this.data=Q}}class AW extends z{constructor(Z,Q){super();this.key=Z,this.value=Q}}class KQ extends z{}class d8 extends z{constructor(Z,Q,W,J,X,K,G,V,Y,H){super();this.open_shadow_root=Z,this.adopt_styles=Q,this.delegates_focus=W,this.attributes=J,this.properties=X,this.contexts=K,this.is_form_associated=G,this.on_form_autofill=V,this.on_form_reset=Y,this.on_form_restore=H}}function s8(Z){let Q=new d8(!0,!0,!1,w,w,w,!1,VW,VW,VW);return GZ(Z,Q,(W,J)=>{return J.apply(W)})}class i8{#Z;constructor(Z,[Q,W],J,X){this.#Z=new BW(Z,[Q,W],X,J)}send(Z){switch(Z.constructor){case pZ:{this.dispatch(Z.message,!1);break}case XQ:{this.emit(Z.name,Z.data);break}case KQ:break}}dispatch(Z){this.#Z.dispatch(Z)}emit(Z,Q){this.#Z.emit(Z,Q)}}var n8=({init:Z,update:Q,view:W},J,X)=>{if(!tQ())return new x(new eQ);let K=J instanceof HTMLElement?J:qZ().querySelector(J);if(!K)return new x(new p6(J));return new C(new i8(K,Z(X),Q,W))};class JX{#Z;#X;#W;#J;#Q;#K;#G=qQ();#Y=new Set;constructor([Z,Q],W,J,X){this.#Z=Z,this.#X=W,this.#W=J,this.#J=X,this.#Q=this.#W(this.#Z),this.#K=W8(this.#Q),this.#V(Q)}send(Z){switch(Z.constructor){case $6:{let{message:Q}=Z,W=this.#U(Q),J=PQ(this.#K,this.#Q,W);this.#Q=W,this.#K=J.events,this.broadcast(y6(J.patch));return}case u6:{let{callback:Q}=Z;this.#Y.add(Q),Q(T8(this.#J.open_shadow_root,this.#J.adopt_styles,mQ(this.#J.attributes),mQ(this.#J.properties),mQ(this.#J.contexts),this.#G,this.#Q));return}case c6:{let{callback:Q}=Z;this.#Y.delete(Q);return}case pZ:{let{message:Q}=Z,[W,J]=this.#X(this.#Z,Q),X=this.#W(W),K=PQ(this.#K,this.#Q,X);this.#V(J),this.#Z=W,this.#Q=X,this.#K=K.events,this.broadcast(y6(K.patch));return}case XQ:{let{name:Q,data:W}=Z;this.broadcast(P8(Q,W));return}case AW:{let{key:Q,value:W}=Z,J=yZ(this.#G,Q);if(J.isOk()&&TZ(J[0],W))return;this.#G=gQ(this.#G,Q,W),this.broadcast(S8(Q,W));return}case KQ:{this.#Z=null,this.#X=null,this.#W=null,this.#J=null,this.#Q=null,this.#K=null,this.#G=null,this.#Y.clear();return}default:return}}broadcast(Z){for(let Q of this.#Y)Q(Z)}#U(Z){switch(Z.constructor){case IW:{let{messages:Q}=Z,W=this.#Z,J=K6();for(let X=Q;X.head;X=X.tail){let K=this.#U(X.head);if(K instanceof C){W=K[0][0],J=uJ(zZ.fromArray([J,K[0][1]]));break}}return this.#V(J),this.#Z=W,this.#W(this.#Z)}case NW:{let{name:Q,value:W}=Z,J=this.#H(Q,W);if(J instanceof x)return this.#Q;else{let[X,K]=this.#X(this.#Z,J[0]);return this.#V(K),this.#Z=X,this.#W(this.#Z)}}case OW:{let{name:Q,value:W}=Z,J=this.#M(Q,W);if(J instanceof x)return this.#Q;else{let[X,K]=this.#X(this.#Z,J[0]);return this.#V(K),this.#Z=X,this.#W(this.#Z)}}case jW:{let{path:Q,name:W,event:J}=Z,[X,K]=D6(this.#K,Q,W,J);if(this.#K=X,K instanceof x)return this.#Q;else{let[G,V]=this.#X(this.#Z,K[0].message);return this.#V(V),this.#Z=G,this.#W(this.#Z)}}case k6:{let{key:Q,value:W}=Z,J=yZ(this.#J.contexts,Q);if(J instanceof x)return this.#Q;if(J=uZ(W,J[0]),J instanceof x)return this.#Q;let[X,K]=this.#X(this.#Z,J[0]);return this.#V(K),this.#Z=X,this.#W(this.#Z)}}}#H(Z,Q){let W=yZ(this.#J.attributes,Z);switch(W.constructor){case C:return W[0](Q);case x:return new x(void 0)}}#M(Z,Q){let W=yZ(this.#J.properties,Z);switch(W.constructor){case C:return W[0](Q);case x:return new x(void 0)}}#V(Z){let Q=(G)=>this.send(new pZ(G)),W=(G,V)=>this.send(new XQ(G,V)),J=()=>{return},X=()=>{return},K=(G,V)=>this.send(new AW(G,V));globalThis.queueMicrotask(()=>{$J(Z,Q,W,J,X,K)})}}class l8 extends z{constructor(Z,Q,W,J){super();this.init=Z,this.update=Q,this.view=W,this.config=J}}class p6 extends z{constructor(Z){super();this.selector=Z}}class eQ extends z{}function h5(Z,Q,W){return new l8(Z,Q,W,s8(w))}function v5(Z,Q,W){return SJ(!tQ(),new x(new eQ),()=>{return n8(Z,Q,W)})}function d6(Z,Q){return _J(Z,vQ(Q,(W)=>{return new pQ(!1,!1,W)}),w,Q6,Q6,0,0)}function l5(Z,Q){if(Z instanceof t)return new t(Z.kind,Z.name,Z.handler,Z.include,Z.prevent_default,Z.stop_propagation,Z.debounce,$W(0,Q));else return Z}function a5(Z){return d6("mouseup",hQ(Z))}function o5(Z){return d6("keyup",rW("key",_Q,(Q)=>{let J=Z(Q);return hQ(J)}))}function t5(Z){return d6("input",sW(B(["target","value"]),_Q,(Q)=>{return hQ(Z(Q))}))}function WY(Z){let Q=document.getElementById(Z);if(Q!==null)Q.scrollIntoView({behavior:"smooth",block:"center"});return}function JY(Z){let Q=document.getElementById(Z);if(Q!==null)Q.focus({preventScroll:!0});return}function XY(Z,Q){return setTimeout(()=>Q(),Z)}function KY(Z){clearTimeout(Z);return}
export{z as a,U as b,B as c,R as d,C as e,wQ as f,K9 as g,QZ as h,VZ as i,d as j,UQ as k,d7 as l,fQ as m,dX as n,sX as o,u as p,A9 as q,lZ as r,QJ as s,BX as t,AX as u,C9 as v,SJ as w,w as x,e as y,rK as z,X6 as A,iK as B,nK as C,lK as D,aK as E,oK as F,tK as G,eK as H,ZG as I,QG as J,WG as K,JG as L,XG as M,K6 as N,UG as O,FG as P,uJ as Q,w0 as R,RW as S,X8 as T,yG as U,K8 as V,fG as W,_G as X,hG as Y,vG as Z,mG as _,$G as $,uG as aa,h5 as ba,v5 as ca,l5 as da,a5 as ea,o5 as fa,t5 as ga,WY as ha,JY as ia,XY as ja,KY as ka};
